<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Featured 3D Carousels</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="icon" href="https://images.rawpixel.com/image_800/czNmcy1wcml2YXRlL3Jhd3BpeGVsX2ltYWdlcy93ZWJzaXRlX2NvbnRlbnQvbHIvYTAxMC1tYXJrdXNzcGlza2UtZmViMTktbXNwXzA3MDlfODg4Ny5qcGc.jpg" type="image/x-icon">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header section is here -->
     <header class="header">
        <div class="header-content">
              <p>PlotTwist</p>
              <div class="logo">Image Gallery</div>
              <div class="controls">
                 <button class="menu-button">DOWNLOAD APP</button>
              </div>
            </div
     </header>
  <!-- New Featured 3D Carousel Section -->
  <section class="featured-carousel-section">
    <h2 class="section-title">FEATURED COLLECTION</h2>
    <h2 class="section-subtitle">PlotTwist</h2>
    <div class="carousel">
      <div class="carousel-control-button left"><input type="radio" name="carousel-control-input"></div>
      <div class="carousel-control-button right"><input type="radio" name="carousel-control-input" checked></div>

      <div class="carousel-rotation-direction">
        <ul class="carousel-item-wrapper" style="--_num-elements: 11">
          <li class="carousel-item" style="--_index: 1; --_image-url: url('https://images.pexels.com/photos/3052361/pexels-photo-3052361.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2')">
            <a target="_blank">Photography Example 1</a>
          </li>
          <li class="carousel-item" style="--_index: 2; --_image-url: url('https://images.pexels.com/photos/17545002/pexels-photo-17545002/free-photo-of-statue-of-liberty.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2')">
            <a target="_blank">Photography Example 2</a>
          </li>
          <li class="carousel-item" style="--_index: 3; --_image-url: url('https://images.pexels.com/photos/11605747/pexels-photo-11605747.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2')">
            <a target="_blank">Photography Example 3</a>
          </li>
          <li class="carousel-item" style="--_index: 4; --_image-url: url('https://images.pexels.com/photos/13968337/pexels-photo-13968337.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2')">
            <a target="_blank">Photography Example 4</a>
          </li>
          <li class="carousel-item" style="--_index: 5; --_image-url: url('https://images.pexels.com/photos/4116967/pexels-photo-4116967.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2')">
            <a target="_blank">Photography Example 5</a>
          </li>
          <li class="carousel-item" style="--_index: 6; --_image-url: url('https://images.pexels.com/photos/12565872/pexels-photo-12565872.jpeg?auto=compress&cs=tinysrgb&w=800&lazy=load')">
            <a target="_blank">Photography Example 6</a>
          </li>
          <li class="carousel-item" style="--_index: 7; --_image-url: url('https://images.pexels.com/photos/13359841/pexels-photo-13359841.jpeg?auto=compress&cs=tinysrgb&w=800&lazy=load')">
            <a target="_blank">Photography Example 7</a>
          </li>
          <li class="carousel-item" style="--_index: 8; --_image-url: url('https://images.pexels.com/photos/9244253/pexels-photo-9244253.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2')">
            <a target="_blank">Photography Example 8</a>
          </li>
          <li class="carousel-item" style="--_index: 9; --_image-url: url('https://images.pexels.com/photos/13972538/pexels-photo-13972538.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2')">
            <a target="_blank">Photography Example 9</a>
          </li>
          <li class="carousel-item" style="--_index: 10; --_image-url: url('https://images.pexels.com/photos/5357262/pexels-photo-5357262.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2')">
            <a target="_blank">Photography Example 10</a>
          </li>
          <li class="carousel-item" style="--_index: 11; --_image-url: url('https://images.pexels.com/photos/14727693/pexels-photo-14727693.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2')">
            <a target="_blank">Photography Example 11</a>
          </li>
          <li class="carousel-ground"></li>
        </ul>
      </div>
    </div>
  </section>


  <section class="featured-carousel-section2">
    <lume-scene webgl physically-correct-lights perspective="800" fog-mode="linear" fog-color="black" fog-near="600" fog-far="700">
      <lume-camera-rig distance="800" min-distance="800" max-distance="800" min-vertical-angle="0" max-vertical-angle="0">
        <lume-point-light intensity="1900" slot="camera-child"></lume-point-light>
      </lume-camera-rig>
      <my-photos></my-photos>
    </lume-scene>
  </section>

    <div class="footer-content">
      <h2>FOOTER</h2>
      <div class="footer-links">
        <a href="#">Privacy Policy</a>
        <a href="#">Terms of Service</a>
        <a href="#">Contact</a>
      </div>
      <p class="copyright">Â© 2025 DLHQ Photography. All rights reserved.</p>
    </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.0/gsap.min.js"></script>
  <script type="importmap">
    {
      "imports": {
        "lume": "https://ga.jspm.io/npm:lume@0.3.0-alpha.41/dist/index.js",
        "solid-js/store": "https://ga.jspm.io/npm:solid-js@1.8.16/store/dist/store.js",
        "classy-solid": "https://ga.jspm.io/npm:classy-solid@0.3.7/dist/index.js"
      },
      "scopes": {
        "https://ga.jspm.io/": {
          "@lume/autolayout": "https://ga.jspm.io/npm:@lume/autolayout@0.10.1/dist/AutoLayout.js",
          "@lume/custom-attributes/dist/index.js": "https://ga.jspm.io/npm:@lume/custom-attributes@0.2.3/dist/index.js",
          "@lume/element": "https://ga.jspm.io/npm:@lume/element@0.11.7/dist/index.js",
          "@lume/eventful": "https://ga.jspm.io/npm:@lume/eventful@0.3.2/dist/index.js",
          "@lume/kiwi": "https://ga.jspm.io/npm:@lume/kiwi@0.4.3/dist/kiwi.js",
          "@lume/three-projected-material/dist/ProjectedMaterial.js": "https://ga.jspm.io/npm:@lume/three-projected-material@0.3.1/dist/ProjectedMaterial.js",
          "element-behaviors": "https://ga.jspm.io/npm:element-behaviors@5.0.3/dist/index.js",
          "james-bond": "https://ga.jspm.io/npm:james-bond@0.7.3/dist/index.js",
          "lowclass": "https://ga.jspm.io/npm:lowclass@7.0.1/dist/index.js",
          "regexr": "https://ga.jspm.io/npm:regexr@2.0.4/dist/index.js",
          "solid-js": "https://ga.jspm.io/npm:solid-js@1.8.16/dist/solid.js",
          "solid-js/html": "https://ga.jspm.io/npm:solid-js@1.8.16/html/dist/html.js",
          "solid-js/web": "https://ga.jspm.io/npm:solid-js@1.8.16/web/dist/web.js",
          "three": "https://ga.jspm.io/npm:three@0.163.0/build/three.module.js",
          "three/": "https://ga.jspm.io/npm:three@0.163.0/"
        }
      }
    }
    </script>
    
    <script type="module">
      import { Element3D, element, html, attribute, Index } from 'lume'
      import { signalify } from 'classy-solid'
    
      async function fetchPhotos() {
        const json = await fetch('https://picsum.photos/v2/list?page=2&limit=14').then(r => r.json())
    
        json.forEach(photo => {
          const parts = photo.download_url.split('/')
          parts.pop()
          parts.pop()
          parts.push(100)
          photo.download_url = parts.join('/')
        })
    
        console.log('photos:', json.map(photo => photo.download_url))
        return json.map(photo => photo.download_url)
      }
    
      const photos = await fetchPhotos()
    
      element('my-photos')(class extends Element3D {
        template = () => html`
          <carousel-layout radius="200">
              ${photos.map((photo, i) => html`
          <lume-rounded-rectangle
            size="80 80"
            corner-radius="10"
            thickness="0.1"
            mount-point="0.5 0.5"
            has="projected-material"
            texture-projectors=${".projector" + i}
            cast-shadow="false"
            receive-shadow="false"
            roughness="0.5"
          >
            <lume-texture-projector
              class=${"projector" + i}
              src=${photo}
              fitment="contain"
              size-mode="p p"
              size="1.1 1.1"
              align-point="0.5 0.5"
              mount-point="0.5 0.5"
              position="0 0 150"
            ></lume-texture-projector>
          </lume-rounded-rectangle>
              `)}
          </carousel-layout>
      `
      })
    
      element('carousel-layout')(class extends Element3D {
        static observedAttributes = {
          radius: attribute.string(),
        }
    
        radius = 200
        hasShadow = true
        childrenSignal = []
    
        constructor() {
          super()
          signalify(this, 'childrenSignal')
        }
    
        connectedCallback() {
          super.connectedCallback()
    
          this.createEffect(() => {
            console.log('children length: ', this.childrenSignal.length)
            let i = -1
            for (const child of this.childrenSignal) {
              i++
              child.slot = "slot" + i
            }
          })
        }
    
        #queued = false
    
        childConnectedCallback(...args) {
          super.childConnectedCallback(...args)
    
          if (this.#queued) return
          this.#queued = true
          requestAnimationFrame(() => {
            console.log('handle children', this.children)
            this.#queued = false
            this.childrenSignal = Array.from(this.children)
          })
        }
    
        template = () => html`
        <${Index} each=${() => this.childrenSignal}>
          ${(_, index) => html`
            <lume-element3d rotation=${() => [0, (360 / this.childrenSignal.length) * index]}>
              <lume-element3d position=${() => [0, 0, this.radius]} mount-point="0.5 0.5">
                <slot name=${() => "slot" + index}></slot>
              </lume-element3d>
            </lume-element3d>
          `}
        </>
      `
      })
    </script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 3D Carousel functionality
      let xPos = 0;

      gsap.timeline()
        .set('.ring', { rotationY: 180, cursor: 'grab' })
        .set('.img', {
          rotateY: (i) => i * -36,
          transformOrigin: '50% 50% 500px',
          z: -500,
          backgroundImage: (i) => 'url(' + getImageUrl(i) + ')',
          backgroundPosition: (i) => getBgPos(i),
          backfaceVisibility: 'hidden'
        })
        .from('.img', {
          duration: 1.5,
          y: 200,
          opacity: 0,
          stagger: 0.1,
          ease: 'expo'
        })
        .add(() => {
          document.querySelectorAll('.img').forEach(img => {
            img.addEventListener('mouseenter', (e) => {
              let current = e.currentTarget;
              gsap.to('.img', { opacity: (i, t) => (t == current) ? 1 : 0.5, ease: 'power3' })
            });

            img.addEventListener('mouseleave', (e) => {
              gsap.to('.img', { opacity: 1, ease: 'power2.inOut' })
            });
          });
        }, '-=0.5');

      document.addEventListener('mousedown', dragStart);
      document.addEventListener('touchstart', dragStart);

      function dragStart(e) {
        if (e.touches) e.clientX = e.touches[0].clientX;
        xPos = Math.round(e.clientX);
        gsap.set('.ring', { cursor: 'grabbing' });
        document.addEventListener('mousemove', drag);
        document.addEventListener('touchmove', drag);
      }

      function drag(e) {
        if (e.touches) e.clientX = e.touches[0].clientX;
        gsap.to('.ring', {
          rotationY: '-=' + ((Math.round(e.clientX) - xPos) % 360),
          onUpdate: () => { gsap.set('.img', { backgroundPosition: (i) => getBgPos(i) }) }
        });

        xPos = Math.round(e.clientX);
      }

      document.addEventListener('mouseup', dragEnd);
      document.addEventListener('touchend', dragEnd);

      function dragEnd(e) {
        document.removeEventListener('mousemove', drag);
        document.removeEventListener('touchmove', drag);
        gsap.set('.ring', { cursor: 'grab' });
      }

      function getBgPos(i) {
        return (100 - gsap.utils.wrap(0, 360, gsap.getProperty('.ring', 'rotationY') - 180 - i * 36) / 360 * 500) + 'px 0px';
      }

      function getImageUrl(i) {
        const imageUrls = [
          'https://picsum.photos/id/42/600/400/',
          'https://picsum.photos/id/43/600/400/',
          'https://picsum.photos/id/44/600/400/',
          'https://picsum.photos/id/45/600/400/',
          'https://picsum.photos/id/46/600/400/',
          'https://picsum.photos/id/47/600/400/',
          'https://picsum.photos/id/48/600/400/',
          'https://picsum.photos/id/49/600/400/',
          'https://picsum.photos/id/50/600/400/',
          'https://picsum.photos/id/51/600/400/'
        ];
        return imageUrls[i];
      }
    });
  </script>
</body>
</html>