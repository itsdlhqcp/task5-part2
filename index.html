<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Featured 3D Carousels</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="icon" href="https://images.rawpixel.com/image_800/czNmcy1wcml2YXRlL3Jhd3BpeGVsX2ltYWdlcy93ZWJzaXRlX2NvbnRlbnQvbHIvYTAxMC1tYXJrdXNzcGlza2UtZmViMTktbXNwXzA3MDlfODg4Ny5qcGc.jpg" type="image/x-icon">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">
  <style>
    /* Global Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }
    
    body {
      background-color: #0a0a0a;
      color: #fff;
      overflow-x: hidden;
    }

    /* Header Styles */
    .site-header {
    width: 100%;
    background-color: #0a0a0a;
    padding: 1rem 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    position: sticky;
    top: 0;
    z-index: 100;
    }

    .header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 2rem;
    max-width: 1400px;
    margin: 0 auto;
    }
      
    .header-content h1 {
    font-family: 'Playfair Display', serif;
    font-size: 1.5rem;
    letter-spacing: 2px;
    }

    .logo {
     font-family: 'Playfair Display', serif;
     font-size: 2rem;
     font-weight: 400;
     color: #fff;
     }

     .menu-button {
     background-color: transparent;
     border: 1px solid rgba(255, 255, 255, 0.5);
     border-radius: 50px;
     color: #fff;
     padding: 0.5rem 1.5rem;
     font-size: 0.9rem;
     cursor: pointer;
     transition: all 0.3s ease;
    }

    /* Mobile adjustments for header */
    @media (max-width: 768px) {
    .header-content {
        padding: 0 1.5rem;
        font-size: 0.8rem;
    }
    
    .logo {
        display: none;
    }
    
    .controls {
        gap: 0.8rem;
    }
    
    .camera-button, .menu-button {
        padding: 0.4rem 1.2rem;
        font-size: 0.4rem;
    }
    }

    /* New Featured 3D Carousel Section */
    .featured-carousel-section {
      width: 100%;
      background-color: #0a0a0a;
      padding: 1rem 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      position: relative;
    }

    .featured-carousel-section2 {
      width: 100%;
      background-color: #0a0a0a;
      padding: 1rem 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 40vh;
      position: relative;
    }

    .featured-carousel-section .section-title {
      position: absolute;
      top: 4rem;
      left: 50%;
      transform: translateX(-50%);
      font-family: 'Playfair Display', serif;
      font-size: 2.5rem;
      letter-spacing: 3px;
      color: #fff;
      text-align: center;
    }

    .featured-carousel-section .section-subtitle {
      position: absolute;
      top: 20rem;
      left: 50%;
      z-index: 1;
      transform: translateX(-50%);
      font-family: 'Playfair Display', serif;
      font-size: 4.5rem;
      letter-spacing: 3px;
      color: #fff;
      text-align: center;
    }

    @media (max-width: 768px) {
      .featured-carousel-section .section-subtitle {
        top: 28rem;
        font-size: 3.4rem;
        overflow-x: hidden;
      }
      .featured-carousel-section .section-title {
        font-size: 1.4rem;
        top: 4rem;
        overflow-x: hidden;
      }
      .featured-carousel-section {
        overflow: hidden;
      }
    }

    @media (max-width: 480px) {
      .featured-carousel-section .section-subtitle {
        top: 32rem;
        font-size: 3.4rem;
        overflow-x: hidden;
      }
      .featured-carousel-section .section-title {
        font-size: 1.4rem;
        top: 4rem;
        overflow-x: hidden;
      }
      .featured-carousel-section {
        overflow: hidden;
      }
    }

    @media (max-width: 360px) {
      .featured-carousel-section .section-subtitle {
        top: 24rem;
        font-size: 3.4rem;
        overflow-x: hidden;
      }
      .featured-carousel-section .section-title {
        font-size: 1.4rem;
        top: 2rem;
        overflow-x: hidden;
      }
      .featured-carousel-section {
        overflow: hidden;
      }
    }

    /* Carousel CSS Variables and Styles */
    :root {
      --carousel-transition-duration: 250ms;
      --carousel-transition-ease: ease-out;
      --carousel-bg-color-rgb: 0, 0, 0;
      --carousel-shadow-color-rgb: 128, 128, 128;
      --carousel-item-width: 11.5rem;
      --carousel-item-height: 17.5rem;
      --carousel-item-hover-effect: 1.075;
      --carousel-item-reflection-blur: 0.25rem;
      --carousel-item-empty-color-rgb: 255, 255, 255;
      --carousel-item-glow-color-rgb: 255, 255, 255;
      --carousel-item-glow-size: 5rem;
      --carousel-diameter: 50rem;
      --carousel-3d-perspective: 1000px;
      --carousel-3d-perspective-origin: 50% 20%;
      --carousel-control-button-width: 1.25rem;
      --carousel-control-button-height: 4rem;
      --carousel-control-color-rgb: 255, 255, 255;
      --carousel-animation-duration: 25s;
      --carousel-animation-play-state: running;
      --carousel-direction-animation-play-state: paused;
    }

    .carousel {
      --_diameter: var(--carousel-diameter);
      --_radius: calc(var(--_diameter) / 2);
      --_item-width: var(--carousel-item-width);
      --_item-height: var(--carousel-item-height);
      perspective: var(--carousel-3d-perspective);
      perspective-origin: var(--carousel-3d-perspective-origin);
      width: var(--_diameter);
      height: var(--_diameter);
    }

    @media only screen and (max-width: 48rem) {
      .carousel {
        --_diameter: calc(var(--carousel-diameter) * 0.75);
        --_item-width: calc(var(--carousel-item-width) * 0.75);
        --_item-height: calc(var(--carousel-item-height) * 0.75);
        overflow: hidden;
      }
    }

    @media only screen and (max-width: 32rem) {
      .carousel {
        --_diameter: calc(var(--carousel-diameter) * 0.6);
        --_item-width: calc(var(--carousel-item-width) * 0.6);
        --_item-height: calc(var(--carousel-item-height) * 0.6);
        overflow: hidden;
      }
    }

    @media only screen and (max-width: 16rem) {
      .carousel {
        --_diameter: calc(var(--carousel-diameter) * 0.25);
        --_item-width: calc(var(--carousel-item-width) * 0.25);
        --_item-height: calc(var(--carousel-item-height) * 0.25);
        overflow: hidden;
      }
    }

    .carousel .carousel-control-button {
      --_width: var(--carousel-control-button-width);
      --_height: var(--carousel-control-button-height);
      z-index: 1;
      width: var(--_width);
      height: var(--_height);
      background-color: rgb(var(--carousel-control-color-rgb));
      opacity: 0.2;
      transition: opacity var(--carousel-transition-duration) var(--carousel-transition-ease);
      position: absolute;
    }

    .carousel .carousel-control-button:hover {
      opacity: 0.4;
    }

    .carousel .carousel-control-button:has(input:checked) {
      opacity: 0.8;
    }

    .carousel .carousel-control-button input {
      -webkit-appearance: none;
      appearance: none;
      opacity: 0;
      width: 100%;
      height: 100%;
      cursor: pointer;
    }

    .carousel .carousel-control-button.left {
      clip-path: polygon(0% 50%, 100% 0%, 100% 100%);
      top: calc(var(--_radius) - var(--_height) / 2);
      left: 0;
    }

    .carousel:has(.carousel-control-button.left input:checked) {
      --carousel-direction-animation-play-state: running;
    }

    .carousel .carousel-control-button.right {
      clip-path: polygon(0% 0%, 100% 50%, 0% 100%);
      top: calc(var(--_radius) - var(--_height) / 2);
      right: 0;
    }

    .carousel:has(.carousel-control-button.right input:checked) {
      --carousel-direction-animation-play-state: paused;
    }

    .carousel .carousel-rotation-direction {
      --_direction-animation-play-state: var(--carousel-direction-animation-play-state);
      --_z: calc(var(--_radius) * -1);
      transform: translateZ(var(--_z));
      transform-style: preserve-3d;
      animation: carousel-rotation-reverse calc(var(--carousel-animation-duration) / 2) reverse linear infinite var(--_direction-animation-play-state);
      transition: all var(--carousel-transition-duration) var(--carousel-transition-ease);
    }

    @keyframes carousel-rotation-reverse {
      from {
        transform: translateZ(var(--_z)) rotateY(0deg);
      }
      to {
        transform: translateZ(var(--_z)) rotateY(360deg);
      }
    }

    @keyframes carousel-rotation-normal {
      from {
        transform: rotateY(0deg);
      }
      to {
        transform: rotateY(360deg);
      }
    }

    .carousel .carousel-item-wrapper {
      transform-style: inherit;
      width: inherit;
      height: inherit;
      list-style-type: none;
      position: relative;
      animation: carousel-rotation-normal var(--carousel-animation-duration) normal linear infinite var(--carousel-animation-play-state);
      transition: all var(--carousel-transition-duration) var(--carousel-transition-ease);
    }

    .carousel .carousel-rotation-direction:has(.carousel-item:hover) {
      --carousel-animation-play-state: paused;
      --_direction-animation-play-state: paused;
    }

    .carousel .carousel-item {
      --_width: var(--_item-width);
      --_height: var(--_item-height);
      --_rotation: calc(360 / var(--_num-elements) * var(--_index) * 1deg);
      left: calc(var(--_radius) - var(--_item-width) / 2);
      top: calc(var(--_radius) - var(--_item-height) / 2);
      transform: rotateY(var(--_rotation)) translateZ(var(--_radius));
      transform-style: inherit;
      width: var(--_width);
      height: var(--_height);
      transition: all var(--carousel-transition-duration) var(--carousel-transition-ease);
      box-shadow: 0 0 var(--carousel-item-glow-size) transparent;
      position: absolute;
    }

    .carousel .carousel-item:hover {
      box-shadow: 0 0 var(--carousel-item-glow-size) rgb(var(--carousel-item-glow-color-rgb));
      transform: rotateY(var(--_rotation)) translateZ(calc(var(--_radius) * var(--carousel-item-hover-effect)));
    }

    .carousel .carousel-item a {
      display: block;
      width: inherit;
      height: inherit;
      text-indent: -9999px;
      background-color: rgba(var(--carousel-item-empty-color-rgb), 0.5);
      background-image: var(--_image-url);
      background-repeat: no-repeat;
      background-position: center;
      background-size: cover;
      transition: filter var(--carousel-transition-duration) var(--carousel-transition-ease);
    }

    .carousel .carousel-item::before {
      content: '';
      width: inherit;
      height: inherit;
      background-color: rgba(var(--carousel-item-empty-color-rgb), 0.5);
      background-image:
        linear-gradient(to top, rgba(var(--carousel-bg-color-rgb), 0.25) 0%, rgba(var(--carousel-bg-color-rgb), 1.0) 75%),
        var(--_image-url);
      background-repeat: no-repeat;
      background-position: center;
      background-size: cover;
      pointer-events: none;
      filter: blur(var(--carousel-item-reflection-blur));
      transition: filter var(--carousel-transition-duration) var(--carousel-transition-ease);
      transform-style: inherit;
      transform-origin: center bottom;
      transform: rotateX(90deg) rotateZ(180deg) rotateY(180deg);
      position: absolute;
    }

    .carousel .carousel-item:hover::before {
      filter: blur(var(--carousel-item-reflection-blur));
    }

    .carousel .carousel-ground {
      --_width: var(--_diameter);
      --_height: var(--_diameter);
      --_rotation: 90deg;
      left: calc(var(--_radius) - var(--_width) / 2);
      top: calc(var(--_radius) - var(--_height) / 2);
      transform: rotateX(var(--_rotation)) translateZ(calc(var(--_item-height) / -2));
      width: var(--_width);
      height: var(--_height);
      border-radius: 50%;
      background: radial-gradient(rgba(var(--carousel-shadow-color-rgb), 0.75) 15%, rgba(var(--carousel-bg-color-rgb), 0) 60%);
      opacity: 0.5;
      transition: opacity var(--carousel-transition-duration) var(--carousel-transition-ease);
      position: absolute;
    }

    .carousel .carousel-item-wrapper:has(.carousel-item:hover) .carousel-ground {
      opacity: 0.75;
    }

    /* Advanced Gallery Section */
    .advanced-gallery-section {
    width: 100%;
    background-color: #0a0a0a;
    padding: 2rem 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    position: relative;
    }

    .advanced-gallery-section .section-title {
    position: absolute;
    top: 4rem;
    left: 50%;
    transform: translateX(-50%);
    font-family: 'Playfair Display', serif;
    font-size: 2.5rem;
    letter-spacing: 3px;
    color: #fff;
    text-align: center;
    }

    .advanced-gallery-section .section-subtitle {
    position: absolute;
    top: 20rem;
    left: 50%;
    z-index: 1;
    transform: translateX(-50%);
    font-family: 'Playfair Display', serif;
    font-size: 4.5rem;
    letter-spacing: 3px;
    color: #fff;
    text-align: center;
    }

    @media (max-width: 768px) {
    .advanced-gallery-section .section-subtitle {
        top: 24rem;
        font-size: 3.4rem;
    }
    .advanced-gallery-section .section-title {
        font-size: 1.4rem;
        top: 2rem;
    }
    }

    /* Footer Styles */
.site-footer {
  width: 100%;
  background-color: #0a0a0a;
  padding: 2rem 0;
  margin-top: 3rem;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.footer-content {
  max-width: 1400px;
  margin: 0 auto;
  padding: 1rem 2rem;
  text-align: center;
}

.footer-content h2 {
  font-family: 'Playfair Display', serif;
  font-size: 1.5rem;
  margin-bottom: 1rem;
  letter-spacing: 2px;
}

.footer-links {
  display: flex;
  justify-content: center;
  gap: 2rem;
  margin: 1rem 0;
}

.footer-links a {
  color: #999;
  text-decoration: none;
  transition: color 0.3s ease;
}

.footer-links a:hover {
  color: #fff;
}

.copyright {
  color: #666;
  font-size: 0.9rem;
  margin-top: 1rem;
}

/* Mobile adjustments for footer */
@media (max-width: 768px) {
  .site-footer {
    padding: 1.5rem 0;
    margin-top: 2rem;
  }
  
  .footer-content {
    padding: 1rem 1.5rem;
  }
  
  .footer-content h2 {
    font-size: 1.3rem;
  }
  
  .footer-links {
    gap: 1.5rem;
  }
  
  .footer-links a {
    font-size: 0.9rem;
  }
}

@media (max-width: 480px) {
  .site-footer {
    padding: 1rem 0;
    margin-top: 1.5rem;
  }
  
  .footer-content {
    padding: 1rem 1rem;
  }
  
  .footer-content h2 {
    font-size: 1.2rem;
    margin-bottom: 0.8rem;
  }
  
  .footer-links {
    flex-direction: column;
    gap: 0.8rem;
    margin: 0.8rem 0;
  }
  
  .footer-links a {
    font-size: 0.85rem;
  }
  
  .copyright {
    font-size: 0.8rem;
    margin-top: 0.8rem;
  }
}

@media (max-width: 360px) {
  .footer-content {
    padding: 0.6rem 0.8rem;
  }
  
  .footer-content h2 {
    font-size: 1.1rem;
  }
  
  .footer-links a {
    font-size: 0.8rem;
  }
  
  .copyright {
    font-size: 0.75rem;
    line-height: 1.4;
  }
}

  </style>
</head>
<body>
    <!-- Header section is here -->
     <header class="header">
        <div class="header-content">
              <p>PlotTwist</p>
              <div class="logo">Image Gallery</div>
              <div class="controls">
                 <button class="menu-button">DOWNLOAD APP</button>
              </div>
            </div
     </header>
  <!-- New Featured 3D Carousel Section -->
  <section class="featured-carousel-section">
    <h2 class="section-title">FEATURED COLLECTION</h2>
    <h2 class="section-subtitle">PlotTwist</h2>
    <div class="carousel">
      <div class="carousel-control-button left"><input type="radio" name="carousel-control-input"></div>
      <div class="carousel-control-button right"><input type="radio" name="carousel-control-input" checked></div>

      <div class="carousel-rotation-direction">
        <ul class="carousel-item-wrapper" style="--_num-elements: 11">
          <li class="carousel-item" style="--_index: 1; --_image-url: url('https://images.pexels.com/photos/3052361/pexels-photo-3052361.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2')">
            <a target="_blank">Photography Example 1</a>
          </li>
          <li class="carousel-item" style="--_index: 2; --_image-url: url('https://images.pexels.com/photos/17545002/pexels-photo-17545002/free-photo-of-statue-of-liberty.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2')">
            <a target="_blank">Photography Example 2</a>
          </li>
          <li class="carousel-item" style="--_index: 3; --_image-url: url('https://images.pexels.com/photos/11605747/pexels-photo-11605747.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2')">
            <a target="_blank">Photography Example 3</a>
          </li>
          <li class="carousel-item" style="--_index: 4; --_image-url: url('https://images.pexels.com/photos/13968337/pexels-photo-13968337.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2')">
            <a target="_blank">Photography Example 4</a>
          </li>
          <li class="carousel-item" style="--_index: 5; --_image-url: url('https://images.pexels.com/photos/4116967/pexels-photo-4116967.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2')">
            <a target="_blank">Photography Example 5</a>
          </li>
          <li class="carousel-item" style="--_index: 6; --_image-url: url('https://images.pexels.com/photos/12565872/pexels-photo-12565872.jpeg?auto=compress&cs=tinysrgb&w=800&lazy=load')">
            <a target="_blank">Photography Example 6</a>
          </li>
          <li class="carousel-item" style="--_index: 7; --_image-url: url('https://images.pexels.com/photos/13359841/pexels-photo-13359841.jpeg?auto=compress&cs=tinysrgb&w=800&lazy=load')">
            <a target="_blank">Photography Example 7</a>
          </li>
          <li class="carousel-item" style="--_index: 8; --_image-url: url('https://images.pexels.com/photos/9244253/pexels-photo-9244253.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2')">
            <a target="_blank">Photography Example 8</a>
          </li>
          <li class="carousel-item" style="--_index: 9; --_image-url: url('https://images.pexels.com/photos/13972538/pexels-photo-13972538.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2')">
            <a target="_blank">Photography Example 9</a>
          </li>
          <li class="carousel-item" style="--_index: 10; --_image-url: url('https://images.pexels.com/photos/5357262/pexels-photo-5357262.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2')">
            <a target="_blank">Photography Example 10</a>
          </li>
          <li class="carousel-item" style="--_index: 11; --_image-url: url('https://images.pexels.com/photos/14727693/pexels-photo-14727693.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2')">
            <a target="_blank">Photography Example 11</a>
          </li>
          <li class="carousel-ground"></li>
        </ul>
      </div>
    </div>
  </section>


  <section class="featured-carousel-section2">
    <lume-scene webgl physically-correct-lights perspective="800" fog-mode="linear" fog-color="black" fog-near="600" fog-far="700">
      <lume-camera-rig distance="800" min-distance="800" max-distance="800" min-vertical-angle="0" max-vertical-angle="0">
        <lume-point-light intensity="1900" slot="camera-child"></lume-point-light>
      </lume-camera-rig>
      <my-photos></my-photos>
    </lume-scene>
  </section>

    <div class="footer-content">
      <h2>FOOTER</h2>
      <div class="footer-links">
        <a href="#">Privacy Policy</a>
        <a href="#">Terms of Service</a>
        <a href="#">Contact</a>
      </div>
      <p class="copyright">© 2025 DLHQ Photography. All rights reserved.</p>
    </div>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.0/gsap.min.js"></script>
  <script type="importmap">
    {
      "imports": {
        "lume": "https://ga.jspm.io/npm:lume@0.3.0-alpha.41/dist/index.js",
        "solid-js/store": "https://ga.jspm.io/npm:solid-js@1.8.16/store/dist/store.js",
        "classy-solid": "https://ga.jspm.io/npm:classy-solid@0.3.7/dist/index.js"
      },
      "scopes": {
        "https://ga.jspm.io/": {
          "@lume/autolayout": "https://ga.jspm.io/npm:@lume/autolayout@0.10.1/dist/AutoLayout.js",
          "@lume/custom-attributes/dist/index.js": "https://ga.jspm.io/npm:@lume/custom-attributes@0.2.3/dist/index.js",
          "@lume/element": "https://ga.jspm.io/npm:@lume/element@0.11.7/dist/index.js",
          "@lume/eventful": "https://ga.jspm.io/npm:@lume/eventful@0.3.2/dist/index.js",
          "@lume/kiwi": "https://ga.jspm.io/npm:@lume/kiwi@0.4.3/dist/kiwi.js",
          "@lume/three-projected-material/dist/ProjectedMaterial.js": "https://ga.jspm.io/npm:@lume/three-projected-material@0.3.1/dist/ProjectedMaterial.js",
          "element-behaviors": "https://ga.jspm.io/npm:element-behaviors@5.0.3/dist/index.js",
          "james-bond": "https://ga.jspm.io/npm:james-bond@0.7.3/dist/index.js",
          "lowclass": "https://ga.jspm.io/npm:lowclass@7.0.1/dist/index.js",
          "regexr": "https://ga.jspm.io/npm:regexr@2.0.4/dist/index.js",
          "solid-js": "https://ga.jspm.io/npm:solid-js@1.8.16/dist/solid.js",
          "solid-js/html": "https://ga.jspm.io/npm:solid-js@1.8.16/html/dist/html.js",
          "solid-js/web": "https://ga.jspm.io/npm:solid-js@1.8.16/web/dist/web.js",
          "three": "https://ga.jspm.io/npm:three@0.163.0/build/three.module.js",
          "three/": "https://ga.jspm.io/npm:three@0.163.0/"
        }
      }
    }
    </script>
    
    <script type="module">
      import { Element3D, element, html, attribute, Index } from 'lume'
      import { signalify } from 'classy-solid'
    
      async function fetchPhotos() {
        const json = await fetch('https://picsum.photos/v2/list?page=2&limit=14').then(r => r.json())
    
        json.forEach(photo => {
          const parts = photo.download_url.split('/')
          parts.pop()
          parts.pop()
          parts.push(100)
          photo.download_url = parts.join('/')
        })
    
        console.log('photos:', json.map(photo => photo.download_url))
        return json.map(photo => photo.download_url)
      }
    
      const photos = await fetchPhotos()
    
      element('my-photos')(class extends Element3D {
        template = () => html`
          <carousel-layout radius="200">
              ${photos.map((photo, i) => html`
          <lume-rounded-rectangle
            size="80 80"
            corner-radius="10"
            thickness="0.1"
            mount-point="0.5 0.5"
            has="projected-material"
            texture-projectors=${".projector" + i}
            cast-shadow="false"
            receive-shadow="false"
            roughness="0.5"
          >
            <lume-texture-projector
              class=${"projector" + i}
              src=${photo}
              fitment="contain"
              size-mode="p p"
              size="1.1 1.1"
              align-point="0.5 0.5"
              mount-point="0.5 0.5"
              position="0 0 150"
            ></lume-texture-projector>
          </lume-rounded-rectangle>
              `)}
          </carousel-layout>
      `
      })
    
      element('carousel-layout')(class extends Element3D {
        static observedAttributes = {
          radius: attribute.string(),
        }
    
        radius = 200
        hasShadow = true
        childrenSignal = []
    
        constructor() {
          super()
          signalify(this, 'childrenSignal')
        }
    
        connectedCallback() {
          super.connectedCallback()
    
          this.createEffect(() => {
            console.log('children length: ', this.childrenSignal.length)
            let i = -1
            for (const child of this.childrenSignal) {
              i++
              child.slot = "slot" + i
            }
          })
        }
    
        #queued = false
    
        childConnectedCallback(...args) {
          super.childConnectedCallback(...args)
    
          if (this.#queued) return
          this.#queued = true
          requestAnimationFrame(() => {
            console.log('handle children', this.children)
            this.#queued = false
            this.childrenSignal = Array.from(this.children)
          })
        }
    
        template = () => html`
        <${Index} each=${() => this.childrenSignal}>
          ${(_, index) => html`
            <lume-element3d rotation=${() => [0, (360 / this.childrenSignal.length) * index]}>
              <lume-element3d position=${() => [0, 0, this.radius]} mount-point="0.5 0.5">
                <slot name=${() => "slot" + index}></slot>
              </lume-element3d>
            </lume-element3d>
          `}
        </>
      `
      })
    </script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 3D Carousel functionality
      let xPos = 0;

      gsap.timeline()
        .set('.ring', { rotationY: 180, cursor: 'grab' })
        .set('.img', {
          rotateY: (i) => i * -36,
          transformOrigin: '50% 50% 500px',
          z: -500,
          backgroundImage: (i) => 'url(' + getImageUrl(i) + ')',
          backgroundPosition: (i) => getBgPos(i),
          backfaceVisibility: 'hidden'
        })
        .from('.img', {
          duration: 1.5,
          y: 200,
          opacity: 0,
          stagger: 0.1,
          ease: 'expo'
        })
        .add(() => {
          document.querySelectorAll('.img').forEach(img => {
            img.addEventListener('mouseenter', (e) => {
              let current = e.currentTarget;
              gsap.to('.img', { opacity: (i, t) => (t == current) ? 1 : 0.5, ease: 'power3' })
            });

            img.addEventListener('mouseleave', (e) => {
              gsap.to('.img', { opacity: 1, ease: 'power2.inOut' })
            });
          });
        }, '-=0.5');

      document.addEventListener('mousedown', dragStart);
      document.addEventListener('touchstart', dragStart);

      function dragStart(e) {
        if (e.touches) e.clientX = e.touches[0].clientX;
        xPos = Math.round(e.clientX);
        gsap.set('.ring', { cursor: 'grabbing' });
        document.addEventListener('mousemove', drag);
        document.addEventListener('touchmove', drag);
      }

      function drag(e) {
        if (e.touches) e.clientX = e.touches[0].clientX;
        gsap.to('.ring', {
          rotationY: '-=' + ((Math.round(e.clientX) - xPos) % 360),
          onUpdate: () => { gsap.set('.img', { backgroundPosition: (i) => getBgPos(i) }) }
        });

        xPos = Math.round(e.clientX);
      }

      document.addEventListener('mouseup', dragEnd);
      document.addEventListener('touchend', dragEnd);

      function dragEnd(e) {
        document.removeEventListener('mousemove', drag);
        document.removeEventListener('touchmove', drag);
        gsap.set('.ring', { cursor: 'grab' });
      }

      function getBgPos(i) {
        return (100 - gsap.utils.wrap(0, 360, gsap.getProperty('.ring', 'rotationY') - 180 - i * 36) / 360 * 500) + 'px 0px';
      }

      function getImageUrl(i) {
        const imageUrls = [
          'https://picsum.photos/id/42/600/400/',
          'https://picsum.photos/id/43/600/400/',
          'https://picsum.photos/id/44/600/400/',
          'https://picsum.photos/id/45/600/400/',
          'https://picsum.photos/id/46/600/400/',
          'https://picsum.photos/id/47/600/400/',
          'https://picsum.photos/id/48/600/400/',
          'https://picsum.photos/id/49/600/400/',
          'https://picsum.photos/id/50/600/400/',
          'https://picsum.photos/id/51/600/400/'
        ];
        return imageUrls[i];
      }
    });
  </script>
</body>
</html>